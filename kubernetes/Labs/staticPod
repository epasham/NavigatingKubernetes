# What is a static Pod
In Kubernetes, a static Pod is created directly by the kubelet from a manifest file on a node 
and not by the API server or a controller (like a Deployment). 

# Identify pod manifest path on the node
ps -ef | grep kubelet
root        1210       1  0 05:49 ?        00:00:09 /usr/bin/kubelet --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf --config=/var/lib/kubelet/config.yaml --pod-infra-container-image=registry.k8s.io/pause:3.10.1 --container-runtime-endpoint unix:///run/containerd/containerd.sock --cgroup-driver=systemd --eviction-hard imagefs.available<5%,memory.available<100Mi,nodefs.available<5% --fail-swap-on=false

# copy the file path from config param
--config=/var/lib/kubelet/config.yaml 

# look for staticpod file path from config file
grep -i staticPodPath /var/lib/kubelet/config.yaml
staticPodPath: /etc/kubernetes/manifests

Output indicates that pod manifests are located in /etc/kubernetes/manifests
YAML manifests placed in this directory are created directly by the kubelet.

# Create sample statidpod on one of the node
cat <<EOF > /etc/kubernetes/manifests/mystaticpod.yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: web
  name: mystaticpod
spec:
  containers:
  - image: nginx:alpine
    name: web
EOF

# verif that pod is created successfully
controlplane:~$ k get po
NAME                       READY   STATUS    RESTARTS   AGE
mystaticpod-controlplane   1/1     Running   0          105s

Observe that the node name, in this case controlplane, is added as suffix to the pod name.

#############################
# How do we identify a staticpod from a pod deployment
#############################
Annotations that indicate a static (mirror) Pod
kubernetes.io/config.source: file
kubernetes.io/config.mirror: <hash> (presence of this means it’s a mirror Pod)

kubectl get pod <pod> -n <ns> -o jsonpath='{.metadata.annotations}'

kubectl get pod mystaticpod-controlplane -n default -o jsonpath='{.metadata.annotations}'
{"cni.projectcalico.org/containerID":"48666a5ffc9de36d1583c198077392963ec2a2f5a5b4308ab764cf7e2555b925","cni.projectcalico.org/podIP":"192.168.0.4/32","cni.projectcalico.org/podIPs":"192.168.0.4/32","kubernetes.io/config.hash":"b8c4387b0159b5eaf01c8590a05605b3","kubernetes.io/config.mirror":"b8c4387b0159b5eaf01c8590a05605b3","kubernetes.io/config.seen":"2026-01-29T06:35:09.718603095Z","kubernetes.io/config.source":"file"} 

kubernetes.io/config.source: file and kubernetes.io/config.mirror annotations in the pod annotation indicates that this pod is a static pod.

####################
# Demystifying Static Pods: How kubelet Exposes Them to the API Server
######################
Even though static Pods are created locally by the kubelet, 
the kubelet still communicates their existence to the API server by creating a mirror Pod

Kubelet reads Pod YAML from the node’s filesystem. The kubelet watches a directory like:
/etc/kubernetes/manifests

Whenever it finds a .yaml/.json file there, it creates and runs the Pod locally.

# Kubelet creates a mirror Pod object in the API server
To make the Pod visible in Kubernetes, kubelet sends a Pod object to the API server using the Kubernetes API.

# This is called a Mirror Pod
Read‑only representation
Created by kubelet, not by controller manager
Exists purely for visibility/discovery

Mirror Pod contains special annotations:
YAMLkubernetes.io/config.source: file
kubernetes.io/config.mirror: "<hash>"

This is how Kubernetes identifies it as a static Pod.
